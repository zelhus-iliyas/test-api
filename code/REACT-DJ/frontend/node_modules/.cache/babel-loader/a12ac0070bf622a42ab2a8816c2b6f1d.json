{"ast":null,"code":"import { GOOGLE_AUTH_FAIL, GOOGLE_AUTH_SUCCESS, LOGOUT } from \"./types\";\nimport axios from \"axios\";\naxios.defaults.withCredentials = true;\nexport const googleAuthenticate = (state, code) => async dispatch => {\n  if (state && code && !localStorage.getItem(\"access\")) {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      }\n    };\n    const details = {\n      state: state,\n      code: code\n    };\n    const formBody = Object.keys(details).map(key => encodeURIComponent(key) + \"=\" + encodeURIComponent(details[key])).join(\"&\");\n\n    try {\n      const res = await axios.post(`http://localhost:8000/auth/o/google-oauth2/?${state}&`, config);\n      console.log(res.data);\n      dispatch({\n        type: GOOGLE_AUTH_SUCCESS,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: GOOGLE_AUTH_FAIL\n      });\n      console.log(err);\n    }\n  }\n};\nexport const logout = () => dispatch => {\n  dispatch({\n    type: LOGOUT\n  });\n};","map":{"version":3,"names":["GOOGLE_AUTH_FAIL","GOOGLE_AUTH_SUCCESS","LOGOUT","axios","defaults","withCredentials","googleAuthenticate","state","code","dispatch","localStorage","getItem","config","headers","details","formBody","Object","keys","map","key","encodeURIComponent","join","res","post","console","log","data","type","payload","err","logout"],"sources":["/home/iliyas/Desktop/newauth/frontend/src/actions/auth.js"],"sourcesContent":["import { GOOGLE_AUTH_FAIL, GOOGLE_AUTH_SUCCESS, LOGOUT } from \"./types\";\n\nimport axios from \"axios\";\naxios.defaults.withCredentials = true;\n\nexport const googleAuthenticate = (state, code) => async (dispatch) => {\n  if (state && code && !localStorage.getItem(\"access\")) {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n    };\n    const details = {\n      state: state,\n      code: code,\n    };\n    const formBody = Object.keys(details)\n      .map(\n        (key) =>\n          encodeURIComponent(key) + \"=\" + encodeURIComponent(details[key])\n      )\n      .join(\"&\");\n    try {\n      const res = await axios.post(\n        `http://localhost:8000/auth/o/google-oauth2/?${state}&`,\n        config\n      );\n      console.log(res.data);\n      dispatch({\n        type: GOOGLE_AUTH_SUCCESS,\n        payload: res.data,\n      });\n    } catch (err) {\n      dispatch({\n        type: GOOGLE_AUTH_FAIL,\n      });\n      console.log(err);\n    }\n  }\n};\n\nexport const logout = () => (dispatch) => {\n  dispatch({\n    type: LOGOUT,\n  });\n};\n"],"mappings":"AAAA,SAASA,gBAAT,EAA2BC,mBAA3B,EAAgDC,MAAhD,QAA8D,SAA9D;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACAA,KAAK,CAACC,QAAN,CAAeC,eAAf,GAAiC,IAAjC;AAEA,OAAO,MAAMC,kBAAkB,GAAG,CAACC,KAAD,EAAQC,IAAR,KAAiB,MAAOC,QAAP,IAAoB;EACrE,IAAIF,KAAK,IAAIC,IAAT,IAAiB,CAACE,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAtB,EAAsD;IACpD,MAAMC,MAAM,GAAG;MACbC,OAAO,EAAE;QACP,gBAAgB;MADT;IADI,CAAf;IAKA,MAAMC,OAAO,GAAG;MACdP,KAAK,EAAEA,KADO;MAEdC,IAAI,EAAEA;IAFQ,CAAhB;IAIA,MAAMO,QAAQ,GAAGC,MAAM,CAACC,IAAP,CAAYH,OAAZ,EACdI,GADc,CAEZC,GAAD,IACEC,kBAAkB,CAACD,GAAD,CAAlB,GAA0B,GAA1B,GAAgCC,kBAAkB,CAACN,OAAO,CAACK,GAAD,CAAR,CAHvC,EAKdE,IALc,CAKT,GALS,CAAjB;;IAMA,IAAI;MACF,MAAMC,GAAG,GAAG,MAAMnB,KAAK,CAACoB,IAAN,CACf,+CAA8ChB,KAAM,GADrC,EAEhBK,MAFgB,CAAlB;MAIAY,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,IAAhB;MACAjB,QAAQ,CAAC;QACPkB,IAAI,EAAE1B,mBADC;QAEP2B,OAAO,EAAEN,GAAG,CAACI;MAFN,CAAD,CAAR;IAID,CAVD,CAUE,OAAOG,GAAP,EAAY;MACZpB,QAAQ,CAAC;QACPkB,IAAI,EAAE3B;MADC,CAAD,CAAR;MAGAwB,OAAO,CAACC,GAAR,CAAYI,GAAZ;IACD;EACF;AACF,CAlCM;AAoCP,OAAO,MAAMC,MAAM,GAAG,MAAOrB,QAAD,IAAc;EACxCA,QAAQ,CAAC;IACPkB,IAAI,EAAEzB;EADC,CAAD,CAAR;AAGD,CAJM"},"metadata":{},"sourceType":"module"}