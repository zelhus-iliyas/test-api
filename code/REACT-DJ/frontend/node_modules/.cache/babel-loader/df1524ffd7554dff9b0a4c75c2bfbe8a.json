{"ast":null,"code":"import { GOOGLE_AUTH_FAIL, GOOGLE_AUTH_SUCCESS, LOGOUT } from \"./types\";\nimport axios from \"axios\";\naxios.defaults.withCredentials = true;\nexport const googleAuthenticate = (state, code) => async dispatch => {\n  if (state && code && !localStorage.getItem(\"access\")) {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      }\n    };\n    const details = {\n      state: state,\n      code: code\n    };\n    const formBody = Object.keys(details).map(key => encodeURIComponent(key) + \"=\" + encodeURIComponent(details[key])).join(\"&\");\n\n    try {\n      const res = await axios.post(`${process.env.REACT_APP_API_URL}/auth/o/google-oauth2/?${formBody}`, config);\n      console.log(res.data);\n      dispatch({\n        type: GOOGLE_AUTH_SUCCESS,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: GOOGLE_AUTH_FAIL\n      });\n      console.log(err);\n    }\n  }\n};\nexport const logout = () => dispatch => {\n  dispatch({\n    type: LOGOUT\n  });\n};","map":{"version":3,"names":["GOOGLE_AUTH_FAIL","GOOGLE_AUTH_SUCCESS","LOGOUT","axios","defaults","withCredentials","googleAuthenticate","state","code","dispatch","localStorage","getItem","config","headers","details","formBody","Object","keys","map","key","encodeURIComponent","join","res","post","process","env","REACT_APP_API_URL","console","log","data","type","payload","err","logout"],"sources":["/home/iliyas/Desktop/newauth/frontend/src/actions/auth.js"],"sourcesContent":["import { GOOGLE_AUTH_FAIL, GOOGLE_AUTH_SUCCESS, LOGOUT } from \"./types\";\n\nimport axios from \"axios\";\naxios.defaults.withCredentials = true;\n\nexport const googleAuthenticate = (state, code) => async (dispatch) => {\n  if (state && code && !localStorage.getItem(\"access\")) {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n    };\n    const details = {\n      state: state,\n      code: code,\n    };\n    const formBody = Object.keys(details)\n      .map(\n        (key) =>\n          encodeURIComponent(key) + \"=\" + encodeURIComponent(details[key])\n      )\n      .join(\"&\");\n    try {\n      const res = await axios.post(\n        `${process.env.REACT_APP_API_URL}/auth/o/google-oauth2/?${formBody}`,\n        config\n      );\n      console.log(res.data);\n      dispatch({\n        type: GOOGLE_AUTH_SUCCESS,\n        payload: res.data,\n      });\n    } catch (err) {\n      dispatch({\n        type: GOOGLE_AUTH_FAIL,\n      });\n      console.log(err);\n    }\n  }\n};\n\nexport const logout = () => (dispatch) => {\n  dispatch({\n    type: LOGOUT,\n  });\n};\n"],"mappings":"AAAA,SAASA,gBAAT,EAA2BC,mBAA3B,EAAgDC,MAAhD,QAA8D,SAA9D;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACAA,KAAK,CAACC,QAAN,CAAeC,eAAf,GAAiC,IAAjC;AAEA,OAAO,MAAMC,kBAAkB,GAAG,CAACC,KAAD,EAAQC,IAAR,KAAiB,MAAOC,QAAP,IAAoB;EACrE,IAAIF,KAAK,IAAIC,IAAT,IAAiB,CAACE,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAtB,EAAsD;IACpD,MAAMC,MAAM,GAAG;MACbC,OAAO,EAAE;QACP,gBAAgB;MADT;IADI,CAAf;IAKA,MAAMC,OAAO,GAAG;MACdP,KAAK,EAAEA,KADO;MAEdC,IAAI,EAAEA;IAFQ,CAAhB;IAIA,MAAMO,QAAQ,GAAGC,MAAM,CAACC,IAAP,CAAYH,OAAZ,EACdI,GADc,CAEZC,GAAD,IACEC,kBAAkB,CAACD,GAAD,CAAlB,GAA0B,GAA1B,GAAgCC,kBAAkB,CAACN,OAAO,CAACK,GAAD,CAAR,CAHvC,EAKdE,IALc,CAKT,GALS,CAAjB;;IAMA,IAAI;MACF,MAAMC,GAAG,GAAG,MAAMnB,KAAK,CAACoB,IAAN,CACf,GAAEC,OAAO,CAACC,GAAR,CAAYC,iBAAkB,0BAAyBX,QAAS,EADnD,EAEhBH,MAFgB,CAAlB;MAIAe,OAAO,CAACC,GAAR,CAAYN,GAAG,CAACO,IAAhB;MACApB,QAAQ,CAAC;QACPqB,IAAI,EAAE7B,mBADC;QAEP8B,OAAO,EAAET,GAAG,CAACO;MAFN,CAAD,CAAR;IAID,CAVD,CAUE,OAAOG,GAAP,EAAY;MACZvB,QAAQ,CAAC;QACPqB,IAAI,EAAE9B;MADC,CAAD,CAAR;MAGA2B,OAAO,CAACC,GAAR,CAAYI,GAAZ;IACD;EACF;AACF,CAlCM;AAoCP,OAAO,MAAMC,MAAM,GAAG,MAAOxB,QAAD,IAAc;EACxCA,QAAQ,CAAC;IACPqB,IAAI,EAAE5B;EADC,CAAD,CAAR;AAGD,CAJM"},"metadata":{},"sourceType":"module"}