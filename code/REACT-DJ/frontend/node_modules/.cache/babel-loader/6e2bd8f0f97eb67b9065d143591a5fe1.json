{"ast":null,"code":"import { GOOGLE_AUTH_FAIL, GOOGLE_AUTH_SUCCESS, LOGOUT } from \"./types\";\nimport axios from \"axios\";\naxios.defaults.withCredentials = true;\nexport const googleAuthenticate = (state, code) => async dispatch => {\n  if (state && code && !localStorage.getItem(\"access\")) {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      }\n    };\n    const details = {\n      state: state,\n      code: code\n    };\n    localStorage.setItem(\"sa\");\n    axios({\n      method: 'post',\n      url: 'http://localhost:8000/auth/o/google-oauth2/',\n      params: {\n        state: state,\n        code: code\n      }\n    }).then(response => {\n      console.log(response.data);\n    });\n    debugger;\n    const formBody = Object.keys(details).map(key => encodeURIComponent(key) + \"=\" + encodeURIComponent(details[key])).join(\"&\");\n\n    try {\n      const res = await axios.post(`http://localhost:8000/auth/o/google-oauth2/?${state}&${code}`, config);\n      console.log(res.data);\n      dispatch({\n        type: GOOGLE_AUTH_SUCCESS,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: GOOGLE_AUTH_FAIL\n      });\n      console.log(err);\n    }\n  }\n};\nexport const logout = () => dispatch => {\n  dispatch({\n    type: LOGOUT\n  });\n};","map":{"version":3,"names":["GOOGLE_AUTH_FAIL","GOOGLE_AUTH_SUCCESS","LOGOUT","axios","defaults","withCredentials","googleAuthenticate","state","code","dispatch","localStorage","getItem","config","headers","details","setItem","method","url","params","then","response","console","log","data","formBody","Object","keys","map","key","encodeURIComponent","join","res","post","type","payload","err","logout"],"sources":["/home/iliyas/Desktop/newauth/frontend/src/actions/auth.js"],"sourcesContent":["import { GOOGLE_AUTH_FAIL, GOOGLE_AUTH_SUCCESS, LOGOUT } from \"./types\";\n\nimport axios from \"axios\";\naxios.defaults.withCredentials = true;\n\nexport const googleAuthenticate = (state, code) => async (dispatch) => {\n  if (state && code && !localStorage.getItem(\"access\")) {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n    };\n    const details = {\n      state: state,\n      code: code,\n    };\n    localStorage.setItem(\"sa\")\n    axios({\n      method: 'post',\n      url: 'http://localhost:8000/auth/o/google-oauth2/',\n      params: {\n        state: state,\n        code: code\n      }\n    })\n    .then(response => {\n      console.log(response.data);\n    });  \n    debugger;\n\n      const formBody = Object.keys(details)\n      .map(\n        (key) =>\n          encodeURIComponent(key) + \"=\" + encodeURIComponent(details[key])\n      )\n      .join(\"&\");\n    try {\n      const res = await axios.post(\n        `http://localhost:8000/auth/o/google-oauth2/?${state}&${code}`,\n        config\n      );\n      console.log(res.data);\n      dispatch({\n        type: GOOGLE_AUTH_SUCCESS,\n        payload: res.data,\n      });\n    } catch (err) {\n      dispatch({\n        type: GOOGLE_AUTH_FAIL,\n      });\n      console.log(err);\n    }\n  }\n};\n\nexport const logout = () => (dispatch) => {\n  dispatch({\n    type: LOGOUT,\n  });\n};\n"],"mappings":"AAAA,SAASA,gBAAT,EAA2BC,mBAA3B,EAAgDC,MAAhD,QAA8D,SAA9D;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACAA,KAAK,CAACC,QAAN,CAAeC,eAAf,GAAiC,IAAjC;AAEA,OAAO,MAAMC,kBAAkB,GAAG,CAACC,KAAD,EAAQC,IAAR,KAAiB,MAAOC,QAAP,IAAoB;EACrE,IAAIF,KAAK,IAAIC,IAAT,IAAiB,CAACE,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAtB,EAAsD;IACpD,MAAMC,MAAM,GAAG;MACbC,OAAO,EAAE;QACP,gBAAgB;MADT;IADI,CAAf;IAKA,MAAMC,OAAO,GAAG;MACdP,KAAK,EAAEA,KADO;MAEdC,IAAI,EAAEA;IAFQ,CAAhB;IAIAE,YAAY,CAACK,OAAb,CAAqB,IAArB;IACAZ,KAAK,CAAC;MACJa,MAAM,EAAE,MADJ;MAEJC,GAAG,EAAE,6CAFD;MAGJC,MAAM,EAAE;QACNX,KAAK,EAAEA,KADD;QAENC,IAAI,EAAEA;MAFA;IAHJ,CAAD,CAAL,CAQCW,IARD,CAQMC,QAAQ,IAAI;MAChBC,OAAO,CAACC,GAAR,CAAYF,QAAQ,CAACG,IAArB;IACD,CAVD;IAWA;IAEE,MAAMC,QAAQ,GAAGC,MAAM,CAACC,IAAP,CAAYZ,OAAZ,EAChBa,GADgB,CAEdC,GAAD,IACEC,kBAAkB,CAACD,GAAD,CAAlB,GAA0B,GAA1B,GAAgCC,kBAAkB,CAACf,OAAO,CAACc,GAAD,CAAR,CAHrC,EAKhBE,IALgB,CAKX,GALW,CAAjB;;IAMF,IAAI;MACF,MAAMC,GAAG,GAAG,MAAM5B,KAAK,CAAC6B,IAAN,CACf,+CAA8CzB,KAAM,IAAGC,IAAK,EAD7C,EAEhBI,MAFgB,CAAlB;MAIAS,OAAO,CAACC,GAAR,CAAYS,GAAG,CAACR,IAAhB;MACAd,QAAQ,CAAC;QACPwB,IAAI,EAAEhC,mBADC;QAEPiC,OAAO,EAAEH,GAAG,CAACR;MAFN,CAAD,CAAR;IAID,CAVD,CAUE,OAAOY,GAAP,EAAY;MACZ1B,QAAQ,CAAC;QACPwB,IAAI,EAAEjC;MADC,CAAD,CAAR;MAGAqB,OAAO,CAACC,GAAR,CAAYa,GAAZ;IACD;EACF;AACF,CAhDM;AAkDP,OAAO,MAAMC,MAAM,GAAG,MAAO3B,QAAD,IAAc;EACxCA,QAAQ,CAAC;IACPwB,IAAI,EAAE/B;EADC,CAAD,CAAR;AAGD,CAJM"},"metadata":{},"sourceType":"module"}